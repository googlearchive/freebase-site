
/*
 * Copyright 2010, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
/*
 
 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE 
*/
(function(b){function k(d,c,a){var e=this,g=d.add(this),h=d.find(a.tabs),i=c.jquery?c:d.children(c),n;h.length||(h=d.children());i.length||(i=d.parent().find(c));i.length||(i=b(c));b.extend(this,{click:function(l,m){var o=h.eq(l);if(typeof l=="string"&&l.replace("#","")){l=l.replace(/([\"\#\$\%\&\'\(\)\*\+\,\.\/\:\;\<\=\>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1");o=h.filter("[href*="+l.replace("#","")+"]");l=Math.max(h.index(o),0)}if(a.rotate){var p=h.length-1;if(l<0)return e.click(p,m);if(l>p)return e.click(0,
m)}if(!o.length){if(n>=0)return e;l=a.initialIndex;o=h.eq(l)}if(l===n)return e;m=m||b.Event();m.type="onBeforeClick";g.trigger(m,[l]);if(!m.isDefaultPrevented()){j[a.effect].call(e,l,function(){m.type="onClick";g.trigger(m,[l])});n=l;h.removeClass(a.current);o.addClass(a.current);return e}},getConf:function(){return a},getTabs:function(){return h},getPanes:function(){return i},getCurrentPane:function(){return i.eq(n)},getCurrentTab:function(){return h.eq(n)},getIndex:function(){return n},next:function(){return e.click(n+
1)},prev:function(){return e.click(n-1)},destroy:function(){h.unbind(a.event).removeClass(a.current);i.find("a[href^=#]").unbind("click.T");return e}});b.each("onBeforeClick,onClick".split(","),function(l,m){b.isFunction(a[m])&&b(e).bind(m,a[m]);e[m]=function(o){b(e).bind(m,o);return e}});if(a.history&&b.fn.history){b.tools.history.init(h);a.event="history"}h.each(function(l){b(this).bind(a.event,function(m){e.click(l,m);return m.preventDefault()})});i.find("a[href^=#]").bind("click.T",function(l){e.click(b(this).attr("href"),
l)});if(location.hash)e.click(location.hash);else if(a.initialIndex===0||a.initialIndex>0)e.click(a.initialIndex)}b.tools=b.tools||{version:"@VERSION"};b.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:false,history:false},addEffect:function(d,c){j[d]=c}};var j={"default":function(d,c){this.getPanes().hide().eq(d).show();c.call()},fade:function(d,c){var a=this.getConf(),e=a.fadeOutSpeed,g=this.getPanes();e?g.fadeOut(e):
g.hide();g.eq(d).fadeIn(a.fadeInSpeed,c)},slide:function(d,c){this.getPanes().slideUp(200);this.getPanes().eq(d).slideDown(400,c)},ajax:function(d,c){this.getPanes().eq(0).load(this.getTabs().eq(d).attr("href"),c)}},f;b.tools.tabs.addEffect("horizontal",function(d,c){f||(f=this.getPanes().eq(0).width());this.getCurrentPane().animate({width:0},function(){b(this).hide()});this.getPanes().eq(d).animate({width:f},function(){b(this).show();c.call()})});b.fn.tabs=function(d,c){var a=this.data("tabs");if(a){a.destroy();
this.removeData("tabs")}if(b.isFunction(c))c={onBeforeClick:c};c=b.extend({},b.tools.tabs.conf,c);this.each(function(){a=new k(b(this),d,c);b(this).data("tabs",a)});return c.api?a:this}})(jQuery);
(function(b,k){function j(f){return!b(f).parents().andSelf().filter(function(){return b.curCSS(this,"visibility")==="hidden"||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};if(!b.ui.version){b.extend(b.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});b.fn.extend({_focus:b.fn.focus,focus:function(f,d){return typeof f==="number"?this.each(function(){var c=this;setTimeout(function(){b(c).focus();d&&d.call(c)},f)}):this._focus.apply(this,arguments)},scrollParent:function(){var f;f=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,
"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!f.length?b(document):f},zIndex:function(f){if(f!==k)return this.css("zIndex",f);if(this.length){f=b(this[0]);for(var d;f.length&&f[0]!==document;){d=f.css("position");
if(d==="absolute"||d==="relative"||d==="fixed"){d=parseInt(f.css("zIndex"),10);if(!isNaN(d)&&d!==0)return d}f=f.parent()}}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(f){f.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.each(["Width","Height"],function(f,d){function c(h,i,n,l){b.each(a,function(){i-=parseFloat(b.curCSS(h,"padding"+this,true))||0;if(n)i-=parseFloat(b.curCSS(h,
"border"+this+"Width",true))||0;if(l)i-=parseFloat(b.curCSS(h,"margin"+this,true))||0});return i}var a=d==="Width"?["Left","Right"]:["Top","Bottom"],e=d.toLowerCase(),g={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(h){if(h===k)return g["inner"+d].call(this);return this.each(function(){b(this).css(e,c(this,h)+"px")})};b.fn["outer"+d]=function(h,i){if(typeof h!=="number")return g["outer"+d].call(this,h);return this.each(function(){b(this).css(e,
c(this,h,true,i)+"px")})}});b.extend(b.expr[":"],{data:function(f,d,c){return!!b.data(f,c[3])},focusable:function(f){var d=f.nodeName.toLowerCase(),c=b.attr(f,"tabindex");if("area"===d){d=f.parentNode;c=d.name;if(!f.href||!c||d.nodeName.toLowerCase()!=="map")return false;f=b("img[usemap=#"+c+"]")[0];return!!f&&j(f)}return(/input|select|textarea|button|object/.test(d)?!f.disabled:"a"==d?f.href||!isNaN(c):!isNaN(c))&&j(f)},tabbable:function(f){var d=b.attr(f,"tabindex");return(isNaN(d)||d>=0)&&b(f).is(":focusable")}});
b(function(){var f=document.body,d=f.appendChild(d=document.createElement("div"));b.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=d.offsetHeight===100;b.support.selectstart="onselectstart"in d;f.removeChild(d).style.display="none"});b.extend(b.ui,{plugin:{add:function(f,d,c){f=b.ui[f].prototype;for(var a in c){f.plugins[a]=f.plugins[a]||[];f.plugins[a].push([d,c[a]])}},call:function(f,d,c){if((d=f.plugins[d])&&f.element[0].parentNode)for(var a=0;a<d.length;a++)f.options[d[a][0]]&&
d[a][1].apply(f.element,c)}},contains:function(f,d){return document.compareDocumentPosition?f.compareDocumentPosition(d)&16:f!==d&&f.contains(d)},hasScroll:function(f,d){if(b(f).css("overflow")==="hidden")return false;var c=d&&d==="left"?"scrollLeft":"scrollTop",a=false;if(f[c]>0)return true;f[c]=1;a=f[c]>0;f[c]=0;return a},isOverAxis:function(f,d,c){return f>d&&f<d+c},isOver:function(f,d,c,a,e,g){return b.ui.isOverAxis(f,c,e)&&b.ui.isOverAxis(d,a,g)}})}})(jQuery);
(function(b,k){if(b.cleanData){var j=b.cleanData;b.cleanData=function(d){for(var c=0,a;(a=d[c])!=null;c++)b(a).triggerHandler("remove");j(d)}}else{var f=b.fn.remove;b.fn.remove=function(d,c){return this.each(function(){if(!c)if(!d||b.filter(d,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return f.call(b(this),d,c)})}}b.widget=function(d,c,a){var e=d.split(".")[0],g;d=d.split(".")[1];g=e+"-"+d;if(!a){a=c;c=b.Widget}b.expr[":"][g]=function(h){return!!b.data(h,
d)};b[e]=b[e]||{};b[e][d]=function(h,i){arguments.length&&this._createWidget(h,i)};c=new c;c.options=b.extend(true,{},c.options);b[e][d].prototype=b.extend(true,c,{namespace:e,widgetName:d,widgetEventPrefix:b[e][d].prototype.widgetEventPrefix||d,widgetBaseClass:g},a);b.widget.bridge(d,b[e][d])};b.widget.bridge=function(d,c){b.fn[d]=function(a){var e=typeof a==="string",g=Array.prototype.slice.call(arguments,1),h=this;a=!e&&g.length?b.extend.apply(null,[true,a].concat(g)):a;if(e&&a.charAt(0)==="_")return h;
e?this.each(function(){var i=b.data(this,d),n=i&&b.isFunction(i[a])?i[a].apply(i,g):i;if(n!==i&&n!==k){h=n;return false}}):this.each(function(){var i=b.data(this,d);i?i.option(a||{})._init():b.data(this,d,new c(a,this))});return h}};b.Widget=function(d,c){arguments.length&&this._createWidget(d,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,
this._getCreateOptions(),d);var a=this;this.element.bind("remove."+this.widgetName,function(){a.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(d,c){var a=d;if(arguments.length===0)return b.extend({},this.options);if(typeof d==="string"){if(c===k)return this.options[d];a={};a[d]=c}this._setOptions(a);return this},_setOptions:function(d){var c=this;b.each(d,function(a,e){c._setOption(a,e)});return this},_setOption:function(d,c){this.options[d]=c;if(d==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(d,c,a){var e=this.options[d];c=b.Event(c);c.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();a=a||{};if(c.originalEvent){d=b.event.props.length;for(var g;d;){g=b.event.props[--d];c[g]=c.originalEvent[g]}}this.element.trigger(c,a);return!(b.isFunction(e)&&e.call(this.element[0],c,a)===false||c.isDefaultPrevented())}}})(jQuery);
(function(b){b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var k=this;this.element.bind("mousedown."+this.widgetName,function(j){return k._mouseDown(j)}).bind("click."+this.widgetName,function(j){if(true===b.data(j.target,k.widgetName+".preventClickEvent")){b.removeData(j.target,k.widgetName+".preventClickEvent");j.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(k){k.originalEvent=
k.originalEvent||{};if(!k.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(k);this._mouseDownEvent=k;var j=this,f=k.which==1,d=typeof this.options.cancel=="string"?b(k.target).parents().add(k.target).filter(this.options.cancel).length:false;if(!f||d||!this._mouseCapture(k))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){j.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(k)&&this._mouseDelayMet(k)){this._mouseStarted=
this._mouseStart(k)!==false;if(!this._mouseStarted){k.preventDefault();return true}}this._mouseMoveDelegate=function(c){return j._mouseMove(c)};this._mouseUpDelegate=function(c){return j._mouseUp(c)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);k.preventDefault();return k.originalEvent.mouseHandled=true}},_mouseMove:function(k){if(b.browser.msie&&!(document.documentMode>=9)&&!k.button)return this._mouseUp(k);if(this._mouseStarted){this._mouseDrag(k);
return k.preventDefault()}if(this._mouseDistanceMet(k)&&this._mouseDelayMet(k))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,k)!==false)?this._mouseDrag(k):this._mouseUp(k);return!this._mouseStarted},_mouseUp:function(k){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;k.target==this._mouseDownEvent.target&&b.data(k.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(k)}return false},_mouseDistanceMet:function(k){return Math.max(Math.abs(this._mouseDownEvent.pageX-k.pageX),Math.abs(this._mouseDownEvent.pageY-k.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(b){b.ui=b.ui||{};var k=/left|center|right/,j=/top|center|bottom/,f=b.fn.position,d=b.fn.offset;b.fn.position=function(c){if(!c||!c.of)return f.apply(this,arguments);c=b.extend({},c);var a=b(c.of),e=a[0],g=(c.collision||"flip").split(" "),h=c.offset?c.offset.split(" "):[0,0],i,n,l;if(e.nodeType===9){i=a.width();n=a.height();l={top:0,left:0}}else if(e.setTimeout){i=a.width();n=a.height();l={top:a.scrollTop(),left:a.scrollLeft()}}else if(e.preventDefault){c.at="left top";i=n=0;l={top:c.of.pageY,
left:c.of.pageX}}else{i=a.outerWidth();n=a.outerHeight();l=a.offset()}b.each(["my","at"],function(){var m=(c[this]||"").split(" ");if(m.length===1)m=k.test(m[0])?m.concat(["center"]):j.test(m[0])?["center"].concat(m):["center","center"];m[0]=k.test(m[0])?m[0]:"center";m[1]=j.test(m[1])?m[1]:"center";c[this]=m});if(g.length===1)g[1]=g[0];h[0]=parseInt(h[0],10)||0;if(h.length===1)h[1]=h[0];h[1]=parseInt(h[1],10)||0;if(c.at[0]==="right")l.left+=i;else if(c.at[0]==="center")l.left+=i/2;if(c.at[1]==="bottom")l.top+=
n;else if(c.at[1]==="center")l.top+=n/2;l.left+=h[0];l.top+=h[1];return this.each(function(){var m=b(this),o=m.outerWidth(),p=m.outerHeight(),r=parseInt(b.curCSS(this,"marginLeft",true))||0,s=parseInt(b.curCSS(this,"marginTop",true))||0,u=o+r+(parseInt(b.curCSS(this,"marginRight",true))||0),t=p+s+(parseInt(b.curCSS(this,"marginBottom",true))||0),q=b.extend({},l),v;if(c.my[0]==="right")q.left-=o;else if(c.my[0]==="center")q.left-=o/2;if(c.my[1]==="bottom")q.top-=p;else if(c.my[1]==="center")q.top-=
p/2;q.left=Math.round(q.left);q.top=Math.round(q.top);v={left:q.left-r,top:q.top-s};b.each(["left","top"],function(w,x){b.ui.position[g[w]]&&b.ui.position[g[w]][x](q,{targetWidth:i,targetHeight:n,elemWidth:o,elemHeight:p,collisionPosition:v,collisionWidth:u,collisionHeight:t,offset:h,my:c.my,at:c.at})});b.fn.bgiframe&&m.bgiframe();m.offset(b.extend(q,{using:c.using}))})};b.ui.position={fit:{left:function(c,a){var e=b(window);e=a.collisionPosition.left+a.collisionWidth-e.width()-e.scrollLeft();c.left=
e>0?c.left-e:Math.max(c.left-a.collisionPosition.left,c.left)},top:function(c,a){var e=b(window);e=a.collisionPosition.top+a.collisionHeight-e.height()-e.scrollTop();c.top=e>0?c.top-e:Math.max(c.top-a.collisionPosition.top,c.top)}},flip:{left:function(c,a){if(a.at[0]!=="center"){var e=b(window);e=a.collisionPosition.left+a.collisionWidth-e.width()-e.scrollLeft();var g=a.my[0]==="left"?-a.elemWidth:a.my[0]==="right"?a.elemWidth:0,h=a.at[0]==="left"?a.targetWidth:-a.targetWidth,i=-2*a.offset[0];c.left+=
a.collisionPosition.left<0?g+h+i:e>0?g+h+i:0}},top:function(c,a){if(a.at[1]!=="center"){var e=b(window);e=a.collisionPosition.top+a.collisionHeight-e.height()-e.scrollTop();var g=a.my[1]==="top"?-a.elemHeight:a.my[1]==="bottom"?a.elemHeight:0,h=a.at[1]==="top"?a.targetHeight:-a.targetHeight,i=-2*a.offset[1];c.top+=a.collisionPosition.top<0?g+h+i:e>0?g+h+i:0}}}};if(!b.offset.setOffset){b.offset.setOffset=function(c,a){if(/static/.test(b.curCSS(c,"position")))c.style.position="relative";var e=b(c),
g=e.offset(),h=parseInt(b.curCSS(c,"top",true),10)||0,i=parseInt(b.curCSS(c,"left",true),10)||0;g={top:a.top-g.top+h,left:a.left-g.left+i};"using"in a?a.using.call(c,g):e.css(g)};b.fn.offset=function(c){var a=this[0];if(!a||!a.ownerDocument)return null;if(c)return this.each(function(){b.offset.setOffset(this,c)});return d.call(this)}}})(jQuery);
(function(b,k){var j={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},f={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};b.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(d){var c=b(this).css(d).offset().top;c<0&&
b(this).css("top",d.top-c)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var d=this,c=d.options,a=c.title||"&#160;",e=b.ui.dialog.getTitleId(d.element),g=(d.uiDialog=b("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",
-1).css("outline",0).keydown(function(n){if(c.closeOnEscape&&n.keyCode&&n.keyCode===b.ui.keyCode.ESCAPE){d.close(n);n.preventDefault()}}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(n){d.moveToTop(false,n)});d.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g);var h=(d.uiDialogTitlebar=b("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),i=b('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).click(function(n){d.close(n);return false}).appendTo(h);(d.uiDialogTitlebarCloseText=b("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(i);b("<span></span>").addClass("ui-dialog-title").attr("id",e).html(a).prependTo(h);if(b.isFunction(c.beforeclose)&&!b.isFunction(c.beforeClose))c.beforeClose=
c.beforeclose;h.find("*").add(h).disableSelection();c.draggable&&b.fn.draggable&&d._makeDraggable();c.resizable&&b.fn.resizable&&d._makeResizable();d._createButtons(c.buttons);d._isOpen=false;b.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();
this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(d){var c=this,a,e;if(false!==c._trigger("beforeClose",d)){c.overlay&&c.overlay.destroy();c.uiDialog.unbind("keypress.ui-dialog");c._isOpen=false;if(c.options.hide)c.uiDialog.hide(c.options.hide,function(){c._trigger("close",d)});else{c.uiDialog.hide();c._trigger("close",d)}b.ui.dialog.overlay.resize();if(c.options.modal){a=0;b(".ui-dialog").each(function(){if(this!==
c.uiDialog[0]){e=b(this).css("z-index");isNaN(e)||(a=Math.max(a,e))}});b.ui.dialog.maxZ=a}return c}},isOpen:function(){return this._isOpen},moveToTop:function(d,c){var a=this.options;if(a.modal&&!d||!a.stack&&!a.modal)return this._trigger("focus",c);if(a.zIndex>b.ui.dialog.maxZ)b.ui.dialog.maxZ=a.zIndex;if(this.overlay){b.ui.dialog.maxZ+=1;this.overlay.$el.css("z-index",b.ui.dialog.overlay.maxZ=b.ui.dialog.maxZ)}a={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};
b.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",b.ui.dialog.maxZ);this.element.attr(a);this._trigger("focus",c);return this},open:function(){if(!this._isOpen){var d=this.options,c=this.uiDialog;this.overlay=d.modal?new b.ui.dialog.overlay(this):null;this._size();this._position(d.position);c.show(d.show);this.moveToTop(true);d.modal&&c.bind("keypress.ui-dialog",function(a){if(a.keyCode===b.ui.keyCode.TAB){var e=b(":tabbable",this),g=e.filter(":first");e=e.filter(":last");if(a.target===e[0]&&!a.shiftKey){g.focus(1);
return false}else if(a.target===g[0]&&a.shiftKey){e.focus(1);return false}}});b(this.element.find(":tabbable").get().concat(c.find(".ui-dialog-buttonpane :tabbable").get().concat(c.get()))).eq(0).focus();this._isOpen=true;this._trigger("open");return this}},_createButtons:function(d){var c=this,a=false,e=b("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=b("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove();
typeof d==="object"&&d!==null&&b.each(d,function(){return!(a=true)});if(a){b.each(d,function(h,i){i=b.isFunction(i)?{click:i,text:h}:i;var n=b('<button type="button"></button>').attr(i,true).unbind("click").click(function(){i.click.apply(c.element[0],arguments)}).appendTo(g);b.fn.button&&n.button()});e.appendTo(c.uiDialog)}},_makeDraggable:function(){function d(h){return{position:h.position,offset:h.offset}}var c=this,a=c.options,e=b(document),g;c.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(h,i){g=a.height==="auto"?"auto":b(this).height();b(this).height(b(this).height()).addClass("ui-dialog-dragging");c._trigger("dragStart",h,d(i))},drag:function(h,i){c._trigger("drag",h,d(i))},stop:function(h,i){a.position=[i.position.left-e.scrollLeft(),i.position.top-e.scrollTop()];b(this).removeClass("ui-dialog-dragging").height(g);c._trigger("dragStop",h,d(i));b.ui.dialog.overlay.resize()}})},_makeResizable:function(d){function c(h){return{originalPosition:h.originalPosition,
originalSize:h.originalSize,position:h.position,size:h.size}}d=d===k?this.options.resizable:d;var a=this,e=a.options,g=a.uiDialog.css("position");a.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:a.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:a._minHeight(),handles:typeof d==="string"?d:"n,e,s,w,se,sw,ne,nw",start:function(h,i){b(this).addClass("ui-dialog-resizing");a._trigger("resizeStart",h,c(i))},resize:function(h,i){a._trigger("resize",
h,c(i))},stop:function(h,i){b(this).removeClass("ui-dialog-resizing");e.height=b(this).height();e.width=b(this).width();a._trigger("resizeStop",h,c(i));b.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var d=this.options;return d.height==="auto"?d.minHeight:Math.min(d.minHeight,d.height)},_position:function(d){var c=[],a=[0,0],e;if(d){if(typeof d==="string"||typeof d==="object"&&"0"in d){c=d.split?d.split(" "):
[d[0],d[1]];if(c.length===1)c[1]=c[0];b.each(["left","top"],function(g,h){if(+c[g]===c[g]){a[g]=c[g];c[g]=h}});d={my:c.join(" "),at:c.join(" "),offset:a.join(" ")}}d=b.extend({},b.ui.dialog.prototype.options.position,d)}else d=b.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(b.extend({of:window},d));e||this.uiDialog.hide()},_setOptions:function(d){var c=this,a={},e=false;b.each(d,function(g,h){c._setOption(g,h);
if(g in j)e=true;if(g in f)a[g]=h});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(d,c){var a=this.uiDialog;switch(d){case "beforeclose":d="beforeClose";break;case "buttons":this._createButtons(c);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+c);break;case "dialogClass":a.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case "disabled":c?a.addClass("ui-dialog-disabled"):
a.removeClass("ui-dialog-disabled");break;case "draggable":var e=a.is(":data(draggable)");e&&!c&&a.draggable("destroy");!e&&c&&this._makeDraggable();break;case "position":this._position(c);break;case "resizable":(e=a.is(":data(resizable)"))&&!c&&a.resizable("destroy");e&&typeof c==="string"&&a.resizable("option","handles",c);!e&&c!==false&&this._makeResizable(c);break;case "title":b(".ui-dialog-title",this.uiDialogTitlebar).html(""+(c||"&#160;"));break}b.Widget.prototype._setOption.apply(this,arguments)},
_size:function(){var d=this.options,c,a,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(d.minWidth>d.width)d.width=d.minWidth;c=this.uiDialog.css({height:"auto",width:d.width}).height();a=Math.max(0,d.minHeight-c);if(d.height==="auto")if(b.support.minHeight)this.element.css({minHeight:a,height:"auto"});else{this.uiDialog.show();d=this.element.css("height","auto").height();e||this.uiDialog.hide();this.element.height(Math.max(d,a))}else this.element.height(Math.max(d.height-
c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});b.extend(b.ui.dialog,{version:"1.8.10",uuid:0,maxZ:0,getTitleId:function(d){d=d.attr("id");if(!d){this.uuid+=1;d=this.uuid}return"ui-dialog-title-"+d},overlay:function(d){this.$el=b.ui.dialog.overlay.create(d)}});b.extend(b.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:b.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(d){return d+".dialog-overlay"}).join(" "),
create:function(d){if(this.instances.length===0){setTimeout(function(){b.ui.dialog.overlay.instances.length&&b(document).bind(b.ui.dialog.overlay.events,function(a){if(b(a.target).zIndex()<b.ui.dialog.overlay.maxZ)return false})},1);b(document).bind("keydown.dialog-overlay",function(a){if(d.options.closeOnEscape&&a.keyCode&&a.keyCode===b.ui.keyCode.ESCAPE){d.close(a);a.preventDefault()}});b(window).bind("resize.dialog-overlay",b.ui.dialog.overlay.resize)}var c=(this.oldInstances.pop()||b("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});b.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(d){var c=b.inArray(d,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]);this.instances.length===0&&b([document,window]).unbind(".dialog-overlay");d.remove();var a=0;b.each(this.instances,function(){a=Math.max(a,this.css("z-index"))});this.maxZ=a},height:function(){var d,c;if(b.browser.msie&&b.browser.version<7){d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);
c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return d<c?b(window).height()+"px":d+"px"}else return b(document).height()+"px"},width:function(){var d,c;if(b.browser.msie&&b.browser.version<7){d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return d<c?b(window).width()+"px":d+"px"}else return b(document).width()+"px"},resize:function(){var d=b([]);b.each(b.ui.dialog.overlay.instances,
function(){d=d.add(this)});d.css({width:0,height:0}).css({width:b.ui.dialog.overlay.width(),height:b.ui.dialog.overlay.height()})}});b.extend(b.ui.dialog.overlay.prototype,{destroy:function(){b.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(b){function k(){f();b(this).parents(".headmenu").data("submenu").find("a:first").click();return false}function j(){var c=b(this),a=c.data("submenu");if(!a.is(".submenu-valid")){var e=c.offset(),g=c.outerHeight();g=e.top+g;if(a.is(".center")){c=c.outerWidth();e=e.left+c/2-a.outerWidth()/2}else if(a.is(".right")){c=c.outerWidth();e=e.left+c-a.outerWidth()}else e=e.left;a.css({display:"none",position:"absolute",top:g,left:e});b(document.body).append(a);a.addClass(".submenu-valid")}if(a.is(":visible"))f(a);
else{f();a.fadeIn()}return false}function f(c){(c||b(".submenu:visible")).fadeOut()}function d(c){(c||b(".submenu-valid")).each(function(){b(this).removeClass("submenu-valid")})}b.factory("nicemenu",{init:function(){b(".headmenu",this.element).each(function(){var c=b(this),a=c.next(".submenu");c.data("submenu",a);a.data("headmenu",c);b(".default-action",c).click(k);c.click(j)});b(".submenu",this.element).click(function(){f(b(this));b(this).fadeOut()})}});b(document).click(function(){f()}).bind("scroll resize",
function(){f();d()})})(jQuery);
(function(b){b.fn.extend({radiotoggle:function(k){k=b.extend({},{onLabel:"On",offLabel:"Off"},k);return this.each(function(){var j=b(this),f=b('<div class="switch"><span class="on">'+k.onLabel+'</span><span class="off">'+k.offLabel+'</span><span class="slide"><span class="inner"></span></span></div>'),d=b(".slide",f),c=b(".on",f),a=b(".off",f);if(j.is(":checked")){f.addClass("on");var e=true}else{f.find(".off").css("display","block");f.find(".on").hide();d.animate({left:30},300)}f.insertAfter(j);
j.hide();f.click(function(){if(e){d.animate({left:30},300,function(){c.hide();a.css({display:"block"});j.attr("checked",false);f.removeClass("on")});e=false;j.removeAttr("checked")}else{d.animate({left:-3},300,function(){a.hide();c.css({display:"block"});j.attr("checked",true);f.addClass("on")});e=true;j.attr("checked","checked")}j.click()})})}})})(jQuery);
(function(){var b,k,j,f,d=function(c,a){return function(){return c.apply(a,arguments)}};f=this;b=jQuery;b.fn.extend({chosen:function(c,a){if(b.browser==="msie"&&(b.browser.version==="6.0"||b.browser.version==="7.0"))return this;return b(this).each(function(){if(!b(this).hasClass("chzn-done"))return new k(this,c,a)})}});k=function(){function c(a){this.set_default_values();this.form_field=a;this.form_field_jq=b(this.form_field);this.is_multiple=this.form_field.multiple;this.is_rtl=this.form_field_jq.hasClass("chzn-rtl");
this.default_text_default=this.form_field.multiple?"Select Some Options":"Select an Option";this.set_up_html();this.register_observers();this.form_field_jq.addClass("chzn-done")}c.prototype.set_default_values=function(){this.click_test_action=d(function(a){return this.test_active_click(a)},this);this.results_showing=this.mouse_on_container=this.active_field=false;this.result_single_selected=this.result_highlighted=null;return this.choices=0};c.prototype.set_up_html=function(){var a,e;this.container_id=
this.form_field.id.length?this.form_field.id.replace(/(:|\.)/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.width();this.default_text=this.form_field_jq.data("placeholder")?this.form_field_jq.data("placeholder"):this.default_text_default;a=b("<div />",{id:this.container_id,"class":"chzn-container "+(this.is_rtl?"chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?a.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+
this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):a.html('<a href="javascript:void(0)" class="chzn-single"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(a);this.container=b("#"+this.container_id);
this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();a=this.container.height();e=this.f_width-j(this.dropdown);this.dropdown.css({width:e+"px",top:a+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();if(this.is_multiple){this.search_choices=this.container.find("ul.chzn-choices").first();
this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chzn-search").first();this.selected_item=this.container.find(".chzn-single").first();a=e-j(this.search_container)-j(this.search_field);this.search_field.css({width:a+"px"})}this.results_build();return this.set_tab_index()};c.prototype.register_observers=function(){this.container.mousedown(d(function(a){return this.container_mousedown(a)},this));this.container.mouseenter(d(function(a){return this.mouse_enter(a)},
this));this.container.mouseleave(d(function(a){return this.mouse_leave(a)},this));this.search_results.mouseup(d(function(a){return this.search_results_mouseup(a)},this));this.search_results.mouseover(d(function(a){return this.search_results_mouseover(a)},this));this.search_results.mouseout(d(function(a){return this.search_results_mouseout(a)},this));this.form_field_jq.bind("liszt:updated",d(function(a){return this.results_update_field(a)},this));this.search_field.blur(d(function(a){return this.input_blur(a)},
this));this.search_field.keyup(d(function(a){return this.keyup_checker(a)},this));this.search_field.keydown(d(function(a){return this.keydown_checker(a)},this));if(this.is_multiple){this.search_choices.click(d(function(a){return this.choices_click(a)},this));return this.search_field.focus(d(function(a){return this.input_focus(a)},this))}else return this.selected_item.focus(d(function(a){return this.activate_field(a)},this))};c.prototype.container_mousedown=function(a){a&&a.type==="mousedown"&&a.stopPropagation();
if(this.pending_destroy_click)return this.pending_destroy_click=false;else{if(this.active_field){if(!this.is_multiple&&a&&(b(a.target)===this.selected_item||b(a.target).parents("a.chzn-single").length)){a.preventDefault();this.results_toggle()}}else{this.is_multiple&&this.search_field.val("");b(document).click(this.click_test_action);this.results_show()}return this.activate_field()}};c.prototype.mouse_enter=function(){return this.mouse_on_container=true};c.prototype.mouse_leave=function(){return this.mouse_on_container=
false};c.prototype.input_focus=function(){if(!this.active_field)return setTimeout(d(function(){return this.container_mousedown()},this),50)};c.prototype.input_blur=function(){if(!this.mouse_on_container){this.active_field=false;return setTimeout(d(function(){return this.blur_test()},this),100)}};c.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};c.prototype.close_field=function(){b(document).unbind("click",this.click_test_action);
if(!this.is_multiple){this.selected_item.attr("tabindex",this.search_field.attr("tabindex"));this.search_field.attr("tabindex",-1)}this.active_field=false;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};c.prototype.activate_field=function(){if(!this.is_multiple&&!this.active_field){this.search_field.attr("tabindex",this.selected_item.attr("tabindex"));this.selected_item.attr("tabindex",
-1)}this.container.addClass("chzn-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus()};c.prototype.test_active_click=function(a){return b(a.target).parents("#"+this.container_id).length?(this.active_field=true):this.close_field()};c.prototype.results_build=function(){var a,e,g,h,i;this.parsing=true;this.results_data=f.SelectParser.select_to_array(this.form_field);if(this.is_multiple&&this.choices>0){this.search_choices.find("li.search-choice").remove();
this.choices=0}else this.is_multiple||this.selected_item.find("span").text(this.default_text);a="";i=this.results_data;g=0;for(h=i.length;g<h;g++){e=i[g];if(e.group)a+=this.result_add_group(e);else if(!e.empty){a+=this.result_add_option(e);if(e.selected&&this.is_multiple)this.choice_build(e);else e.selected&&!this.is_multiple&&this.selected_item.find("span").text(e.text)}}this.show_search_field_default();this.search_field_scale();this.search_results.html(a);return this.parsing=false};c.prototype.result_add_group=
function(a){if(a.disabled)return"";else{a.dom_id=this.container_id+"_g_"+a.array_index;return'<li id="'+a.dom_id+'" class="group-result">'+b("<div />").text(a.label).html()+"</li>"}};c.prototype.result_add_option=function(a){var e;if(a.disabled)return"";else{a.dom_id=this.container_id+"_o_"+a.array_index;e=a.selected&&this.is_multiple?[]:["active-result"];a.selected&&e.push("result-selected");a.group_array_index!=null&&e.push("group-option");return'<li id="'+a.dom_id+'" class="'+e.join(" ")+'">'+
a.html+"</li>"}};c.prototype.results_update_field=function(){this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};c.prototype.result_do_highlight=function(a){var e,g,h,i;if(a.length){this.result_clear_highlight();this.result_highlight=a;this.result_highlight.addClass("highlighted");g=parseInt(this.search_results.css("maxHeight"),10);i=this.search_results.scrollTop();h=g+i;e=this.result_highlight.position().top+this.search_results.scrollTop();a=e+this.result_highlight.outerHeight();
if(a>=h)return this.search_results.scrollTop(a-g>0?a-g:0);else if(e<i)return this.search_results.scrollTop(e)}};c.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};c.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};c.prototype.results_show=function(){if(!this.is_multiple){this.selected_item.addClass("chzn-single-with-drop");this.result_single_selected&&
this.result_do_highlight(this.result_single_selected)}this.dropdown.css({top:(this.is_multiple?this.container.height():this.container.height()-1)+"px",left:0});this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};c.prototype.results_hide=function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.dropdown.css({left:"-9000px"});return this.results_showing=false};c.prototype.set_tab_index=
function(){var a;if(this.form_field_jq.attr("tabindex")){a=this.form_field_jq.attr("tabindex");this.form_field_jq.attr("tabindex",-1);if(this.is_multiple)return this.search_field.attr("tabindex",a);else{this.selected_item.attr("tabindex",a);return this.search_field.attr("tabindex",-1)}}};c.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default")}else{this.search_field.val("");
return this.search_field.removeClass("default")}};c.prototype.search_results_mouseup=function(a){var e;e=b(a.target).hasClass("active-result")?b(a.target):b(a.target).parents(".active-result").first();if(e.length){this.result_highlight=e;return this.result_select(a)}};c.prototype.search_results_mouseover=function(a){if(a=b(a.target).hasClass("active-result")?b(a.target):b(a.target).parents(".active-result").first())return this.result_do_highlight(a)};c.prototype.search_results_mouseout=function(a){if(b(a.target).hasClass("active-result"))return this.result_clear_highlight()};
c.prototype.choices_click=function(a){a.preventDefault();if(this.active_field&&!b(a.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};c.prototype.choice_build=function(a){var e;e=this.container_id+"_c_"+a.array_index;this.choices+=1;this.search_container.before('<li class="search-choice" id="'+e+'"><span>'+a.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+a.array_index+'"></a></li>');return b("#"+e).find("a").first().click(d(function(g){return this.choice_destroy_link_click(g)},
this))};c.prototype.choice_destroy_link_click=function(a){a.preventDefault();this.pending_destroy_click=true;return this.choice_destroy(b(a.target))};c.prototype.choice_destroy=function(a){this.choices-=1;this.show_search_field_default();this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide();this.result_deselect(a.attr("rel"));return a.parents("li").first().remove()};c.prototype.result_select=function(a){var e,g;if(this.result_highlight){e=this.result_highlight;g=
e.attr("id");this.result_clear_highlight();e.addClass("result-selected");if(this.is_multiple)this.result_deactivate(e);else this.result_single_selected=e;e=g.substr(g.lastIndexOf("_")+1);e=this.results_data[e];e.selected=true;this.form_field.options[e.options_index].selected=true;this.is_multiple?this.choice_build(e):this.selected_item.find("span").first().text(e.text);a.metaKey&&this.is_multiple||this.results_hide();this.search_field.val("");this.form_field_jq.trigger("change");return this.search_field_scale()}};
c.prototype.result_activate=function(a){return a.addClass("active-result").show()};c.prototype.result_deactivate=function(a){return a.removeClass("active-result").hide()};c.prototype.result_deselect=function(a){var e;e=this.results_data[a];e.selected=false;this.form_field.options[e.options_index].selected=false;b("#"+this.container_id+"_o_"+a).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change");return this.search_field_scale()};
c.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()};c.prototype.winnow_results=function(){var a,e,g,h,i,n,l,m,o,p,r,s,u,t;this.no_results_clear();l=0;m=this.search_field.val()===this.default_text?"":b("<div/>").text(b.trim(this.search_field.val())).html();i=new RegExp("^"+m.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");o=new RegExp(m.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");t=this.results_data;p=0;for(s=t.length;p<s;p++){e=t[p];if(!e.disabled&&
!e.empty)if(e.group)b("#"+e.dom_id).hide();else if(!(this.is_multiple&&e.selected)){a=false;n=e.dom_id;if(i.test(e.html)){a=true;l+=1}else if(e.html.indexOf(" ")>=0||e.html.indexOf("[")===0){h=e.html.replace(/\[|\]/g,"").split(" ");if(h.length){r=0;for(u=h.length;r<u;r++){g=h[r];if(i.test(g)){a=true;l+=1}}}}if(a){if(m.length){a=e.html.search(o);g=e.html.substr(0,a+m.length)+"</em>"+e.html.substr(a+m.length);g=g.substr(0,a)+"<em>"+g.substr(a)}else g=e.html;b("#"+n).html!==g&&b("#"+n).html(g);this.result_activate(b("#"+
n));e.group_array_index!=null&&b("#"+this.results_data[e.group_array_index].dom_id).show()}else{this.result_highlight&&n===this.result_highlight.attr("id")&&this.result_clear_highlight();this.result_deactivate(b("#"+n))}}}return l<1&&m.length?this.no_results(m):this.winnow_results_set_highlight()};c.prototype.winnow_results_clear=function(){var a,e,g,h,i;this.search_field.val("");e=this.search_results.find("li");i=[];g=0;for(h=e.length;g<h;g++){a=e[g];a=b(a);i.push(a.hasClass("group-result")?a.show():
!this.is_multiple||!a.hasClass("result-selected")?this.result_activate(a):void 0)}return i};c.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight){a=!this.is_multiple?this.search_results.find(".result-selected"):[];a=a.length?a.first():this.search_results.find(".active-result").first();if(a!=null)return this.result_do_highlight(a)}};c.prototype.no_results=function(a){var e;e=b('<li class="no-results">No results match "<span></span>"</li>');e.find("span").first().html(a);
return this.search_results.append(e)};c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};c.prototype.keydown_arrow=function(){var a;if(this.result_highlight){if(this.results_showing)(a=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(a)}else(a=this.search_results.find("li.active-result").first())&&this.result_do_highlight(b(a));if(!this.results_showing)return this.results_show()};c.prototype.keyup_arrow=function(){var a;
if(!this.results_showing&&!this.is_multiple)return this.results_show();else if(this.result_highlight){a=this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());else{this.choices>0&&this.results_hide();return this.result_clear_highlight()}}};c.prototype.keydown_backstroke=function(){if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke()}else{this.pending_backstroke=this.search_container.siblings("li.search-choice").last();
return this.pending_backstroke.addClass("search-choice-focus")}};c.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};c.prototype.keyup_checker=function(a){var e,g;e=(g=a.which)!=null?g:a.keyCode;this.search_field_scale();switch(e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();else if(!this.pending_backstroke){this.result_clear_highlight();
return this.results_search()}break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:if(this.results_showing)return this.results_hide();break;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};c.prototype.keydown_checker=function(a){var e,g;e=(g=a.which)!=null?g:a.keyCode;this.search_field_scale();e!==8&&this.pending_backstroke&&this.clear_backstroke();switch(e){case 8:this.backstroke_length=this.search_field.val().length;
break;case 9:this.mouse_on_container=false;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow();break}};c.prototype.search_field_scale=function(){var a,e,g,h,i;if(this.is_multiple){e="position:absolute; left: -1000px; top: -1000px; display:none;";g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];h=0;for(i=g.length;h<i;h++){a=g[h];e+=a+":"+this.search_field.css(a)+";"}a=b("<div />",
{style:e});a.text(this.search_field.val());b("body").append(a);e=a.width()+25;a.remove();if(e>this.f_width-10)e=this.f_width-10;this.search_field.css({width:e+"px"});a=this.container.height();return this.dropdown.css({top:a+"px"})}};c.prototype.generate_field_id=function(){var a;a=this.generate_random_id();return this.form_field.id=a};c.prototype.generate_random_id=function(){var a;for(a="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();b("#"+a).length>0;)a+=
this.generate_random_char();return a};c.prototype.generate_random_char=function(){var a;a=Math.floor(Math.random()*36);return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ".substring(a,a+1)};return c}();j=function(c){return c.outerWidth()-c.width()};f.get_side_border_padding=j}).call(this);
(function(){var b;b=function(){function k(){this.options_index=0;this.parsed=[]}k.prototype.add_node=function(j){return j.nodeName==="OPTGROUP"?this.add_group(j):this.add_option(j)};k.prototype.add_group=function(j){var f,d,c,a,e,g;f=this.parsed.length;this.parsed.push({array_index:f,group:true,label:j.label,children:0,disabled:j.disabled});e=j.childNodes;g=[];c=0;for(a=e.length;c<a;c++){d=e[c];g.push(this.add_option(d,f,j.disabled))}return g};k.prototype.add_option=function(j,f,d){if(j.nodeName===
"OPTION"){if(j.text!==""){if(f!=null)this.parsed[f].children+=1;this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:j.value,text:j.text,html:j.innerHTML,selected:j.selected,disabled:d===true?d:j.disabled,group_array_index:f})}else this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true});return this.options_index+=1}};return k}();b.select_to_array=function(k){var j,f,d,c;j=new b;c=k.childNodes;f=0;for(d=c.length;f<d;f++){k=c[f];
j.add_node(k)}return j.parsed};this.SelectParser=b}).call(this);
(function(b,k){var j=k.queryeditor={init:function(){CueCard.helper=k.h.ajax_url("lib/cuecard/");CueCard.freebaseServiceUrl=k.acre.freebase.service_url+"/";CueCard.urlPrefix=CueCard.apiProxy.base=k.h.ajax_url("lib/cuecard/");var f=CueCard.parseURLParameters(),d=false,c={toggle_callback:j.toggleHeaders,initial_tab:f.tab},a={paneldrawer:{element:b("#qe-module"),drawer_height:250,toggle_state:b.localstore("cc_cp")=="1",toggle_callback:j.toggleControlPane,panel_content:"cuecard-queryEditor-content"},extended:0,
costs:b.localstore("cc_cp_costs")=="1"?true:false};queryEditorOptions={focusOnReady:true,onUnauthorizedMqlWrite:function(){if(window.confirm("Query editor needs to be authorized to write data on your behalf. Proceed to authorization?")){saveQuery();var l=document.location.href,m=l.indexOf("#");if(m>0)l=l.substr(0,m);else{m=l.indexOf("?");if(m>0)l=l.substr(0,m)}l="/signin/login?mw_cookie_scope=domain&onsignin="+encodeURIComponent(l);document.location=l}},codeMirror:{parserfile:[b("#codemirror-js").attr("href")],
stylesheet:[b("#codemirror-css").attr("href")]}};if("q"in f||"query"in f){var e="q"in f?f.q:f.query;try{var g=JSON.parse(e);if("query"in g){e=JSON.stringify(g.query);delete g.query;a.env=g}}catch(h){}queryEditorOptions.content=e;queryEditorOptions.cleanUp=true;if("extended"in f)a.extended=f.extended=="1"?1:0;if("as_of_time"in f)a.as_of_time=f.as_of_time;if("env"in f)try{a.env=JSON.parse(f.env)}catch(i){}}else try{g=JSON.parse(b.localstore("qe_initialQuery"));if(b.trim(g.t).length>0)queryEditorOptions.content=
g.t;a.env=g.e}catch(n){}if("autorun"in f)d=true;queryEditorOptions.onChange=function(){j.is_dirty=true;b("#save-query").addClass("disabled")};queryEditorOptions.onRun=function(l){l.code==="/api/status/ok"&&j.is_dirty&&b("#save-query").removeClass("disabled")};queryEditorOptions.onReady=function(){b(".cuecard-queryEditor-queryAssist").radiotoggle();b(".nicemenu").nicemenu();b("#links").prependTo("#the-output-pane .cuecard-outputPane-tabs");j.resize();b(window).resize(j.resize);j.is_dirty=false;d&&
j.cuecard.queryEditor.run(false);setTimeout(function(){b("#qe-module, #the-output-pane").css("visibility","visible")},1)};if(queryEditorOptions.content)c.queryLoaded=true;j.cuecard=CueCard.createComposition({queryEditorElement:b("#the-query-editor")[0],queryEditorOptions:queryEditorOptions,outputPaneElement:b("#the-output-pane")[0],outputPaneOptions:c,controlPaneElement:b("#the-control-pane")[0],controlPaneOptions:a});j.page_chrome_height=b("#header").outerHeight(true)+b("#footer").outerHeight(true)+
(b("#page-content").outerHeight(true)-b("#page-content").height())+b("#page-title").outerHeight(true);b(window).bind("beforeunload",function(){j.store()});b(".cuecard-examples-technique").chosen()},resize:function(){var f=b(window).height()-j.page_chrome_height;if(f){b("#qe-module").height(f);j.cuecard.outputPane&&j.cuecard.outputPane.layout(f);j.cuecard.queryEditor&&j.cuecard.queryEditor.layout(f)}},toggleControlPane:function(f){b.localstore("cc_cp",f?"1":"0",false)},toggleHeaders:function(f){b("span",
this).addClass(f?"remove-icon":"add-icon").removeClass(f?"add-icon":"remove-icon")},getUrlFlags:function(){var f=j.cuecard.controlPane.getQueryEnvelope({},true);if(queryEditorOptions.emql)f.emql=1;if("debug"in queryEditorOptions)f.debug=queryEditorOptions.debug;if(queryEditorOptions.service!=null)f.service=queryEditorOptions.service;return f},computeMqlReadLink:function(){b(this).attr("href",j.cuecard.queryEditor.getMqlReadURL())},computePermanentLink:function(){var f=j.getUrlFlags();f.q=j.cuecard.queryEditor.content();
b(this).attr("href",k.h.fb_url("/queryeditor",f))},computeCompactLink:function(){var f=j.getUrlFlags();f.q=j.cuecard.queryEditor.getUnresolvedQuery();b(this).attr("href",k.h.fb_url("/queryeditor",f))},computeTinyCompactLink:function(){var f=j.getUrlFlags();f.q=j.cuecard.queryEditor.getUnresolvedQuery();f.autorun=1;f=k.h.fb_url(CueCard.helper+"tinyurl.ajax",f);var d=CueCard.UI.createBlockingContinuations(function(c,a){window.prompt("Tiny URL to copy",a.result.url)});b.post(f,{},d.onDone,"json")},store:function(){var f=
CueCard.jsonize({t:j.cuecard.queryEditor.content(),e:j.cuecard.controlPane.getQueryEnvelope({},true,true)},{breakLines:false});b.localstore("qe_initialQuery",f,false)},save:function(){var f=b(this);if(f.is(".editing"))return false;f.addClass("editing");k.get_script(k.h.static_url("query-edit.mf.js"),function(){j.edit.create_begin(this)});return false}};b(j.init())})(jQuery,window.freebase);
